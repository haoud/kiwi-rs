[package]
name = "kernel"
version = "0.1.0"
edition = "2021"

[dependencies]
intrusive-collections = { version = "0.9.6", default-features = false }
elf = { version = "0.7.4", default-features = false }
config = { workspace = true }
macros = { workspace = true }
spin = { workspace = true }
arch = { path = "arch" }
log = "0.4.21"

[features]
default = ["logging"]
logging = ["arch/logging"]

[workspace]
members = ["arch", "crates/config", "crates/macros"]

[workspace.dependencies]
config = { path = "crates/config" }
macros = { path = "crates/macros" }
bitflags = "2.5.0"
heapless = "0.8.0"
colored = "2.1.0"
spin = "0.9.8"
log = "0.4.21"

[profile.release]
codegen-units = 1
opt-level = "s"
lto = true
